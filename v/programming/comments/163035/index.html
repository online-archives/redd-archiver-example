<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Perhaps this may be better off in /v/compsci or something, and indeed I shall crosslink this post there. I&#39;m wondering: what are the... - v/programming">
<meta name="keywords" content="programming, code, encode, digits, base, ceil, followed, encoded, msb, gets">
<meta name="author" content="Redd Archive Demo">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://online-archives.github.io/redd-archiver-example/v/programming/comments/163035.html">

<!-- Open Graph Tags -->
<meta property="og:title" content="v/programming: How to represent arbitrary-precision integers?">
<meta property="og:description" content="Perhaps this may be better off in /v/compsci or something, and indeed I shall crosslink this post there. I&#39;m wondering: what are the... - v/programming">
<meta property="og:type" content="article">
<meta property="og:url" content="https://online-archives.github.io/redd-archiver-example/v/programming/comments/163035.html">
<meta property="og:site_name" content="Redd Archive Demo">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="v/programming: How to represent arbitrary-precision integers?">
<meta name="twitter:description" content="Perhaps this may be better off in /v/compsci or something, and indeed I shall crosslink this post there. I&#39;m wondering: what are the... - v/programming">

    <!-- Favicon -->
<link rel="icon" href="../../../../static/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../../../../static/apple-touch-icon.png">
    <link rel="manifest" href="../../../../static/site.webmanifest">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "DiscussionForumPosting",
  "headline": "How to represent arbitrary-precision integers?",
  "author": {
    "@type": "Person",
    "name": "NotSurvivingLife"
  },
  "datePublished": "2015-06-23T21:34:59Z",
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/CommentAction",
    "userInteractionCount": 2
  },
  "isPartOf": {
    "@type": "WebSite",
    "name": "v/programming Archive",
    "url": "https://online-archives.github.io/redd-archiver-example"
  },
  "text": "Perhaps this may be better off in /v/compsci or something, and indeed I shall crosslink this post there. I'm wondering: what are the different ways of encoding arbitrary-precision integers, and how do they compare w.r.t. efficiency. The ways I know of: Encode it in unary, with n ones followed by a zero. This takes n+1 bits to encode. So 10 (base 10) gets encoded as 1111 1111 11 0. Encode the number of digits in the above scheme, followed by the digits of the number in base 2. This takes..."
}
</script>
    <!-- Font preload removed - using system fonts for instant rendering -->

    <!-- Theme Toggle -->
    <input type="checkbox" id="dark-theme-toggle">

    <!-- Universal CSS Build -->
    <link rel="stylesheet" href="../../../../static/css/redd-archiver-universal.css">


    <title>v/programming: How to represent arbitrary-precision integers?</title>
  </head>
  <body>
    <div class="site-content">
<header>
  <nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" href="../../../../v/programming/index.html">v/programming</a>
    <input type="checkbox" id="navbar-toggle" class="navbar-toggle">
    <label for="navbar-toggle" class="navbar-toggler" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </label>
    <div class="navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index.html">score</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-comments/index.html">comments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-date/index.html">date</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../search">search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../index.html">home</a>
        </li>
        <li class="nav-item">
          <label for="dark-theme-toggle" class="nav-link theme-toggle" title="Toggle dark theme"></label>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <main role="main" class="container-fluid">
<div class="submission pt-3" data-id="voat_163035">
  <h3 class="title">
      How to represent arbitrary-precision integers?
    
    
    
    
    
    
  </h3>
  <p>
    <span class="badge badge-primary" title="Score: 4">4</span>
    &nbsp;&nbsp;
    <span title="Posted: 2015-06-23 21:34:59 UTC">23 Jun 2015 21:34</span>
    by <span ><a class="user-link" href="../../../../user/NotSurvivingLife/">u/NotSurvivingLife</a>
</span>
    
    
    <span title=""></span>
  </p>
  <div class="card mt-3 mb-3">
    <div class="card-body">
      <div class="md"><p>Perhaps this may be better off in <a href="https://voat.co/v/compsci">/v/compsci</a> or something, and indeed I shall crosslink this post there.</p>
<p>I'm wondering: what are the different ways of encoding arbitrary-precision integers, and how do they compare w.r.t. <em>efficiency</em>.</p>
<p>The ways I know of:</p>
<ul>
<li>Encode it in unary, with <code>n</code> ones followed by a zero. This takes <code>n+1</code> bits to encode. So <code>10</code> (base 10) gets encoded as <code>1111 1111 11 0</code>.</li>
<li>Encode the number of digits in the above scheme, followed by the digits of the number in base 2. This takes <code>2*ceil(log2(n+1))  + 1</code> digits to encode, or 1 bit for zero. So <code>10</code> (base 10) gets encoded as <code>1111 0 1010</code>. (Or potentially with the number encoded LSB-first instead. Same difference)</li>
<li>Encode the number of digits with  <em>zeros</em>, followed by the number MSB-first. (Effectively you reuse the implied 1 at the highest bit of the number - similar to how floats work.) Note that in this scheme <code>0</code> has to be represented specially, by <code>1</code>, for instance. So <code>10</code> gets encoded as <code>0000 1010</code>. This takes <code>2*ceil(log2(n+1))</code> digits to encode, or 1 bit for 0. Again, MSB-first versus LSB-first, same difference.</li>
<li>Encode the number of digits for the number of digits with <em>zeros</em>, followed by the number of digits MSB-first, followed by the number MSB-first. Again, with <code>0</code> represented specially, for instance with <code>1</code>. This takes <code>ceil(log2(n+1)) + 2*ceil(log2(ceil(log2(n+1))+1))</code> digits to encode, or <code>1</code> bit for <code>0</code>.</li>
<li>Note that you can iterate the above as many times as you wish.</li>
<li>Encode the number as groups of <code>i</code> digits, for some value of <code>i &gt;= 1</code>, where all ones means &quot;the number is done&quot; else it is a digit of the number base <code>2^i-1</code>. Note that <code>i=1</code> is equivalent to unary, above. So, for example, with <code>i=2</code> <code>10</code> (base 10) gets encoded as <code>01 00 01 11</code> (<code>101</code>, base 3, then stop. Again, LSB or MSB first, same difference.) This takes <code>i*(ceil(log_(2^i-1)(n) + 1) + 1)</code> bits to encode, or i for zero.</li>
</ul>
<p>I am sure there are more potential encodings, however. And it would not surprise me if I messed up on counting the numbers of bits required. Note that encoding 2 is always beat or tied by encoding 3.</p></div>
    </div>
  </div>
</div>

<div class="comments">
  <h4>3 comments</h4>
        <details class="comment "
         id="comment-voat_440511"
         data-depth="0"
         data-id="voat_440511"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/nefreat/">u/nefreat</a>

            </span>
            
            
            
            <span title="Posted: 2015-06-24 02:16:19 UTC">24 Jun 2015 02:16</span>
        </span>
    </summary>
    <div class="md"><p>I would recommend you look at Java's <a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java">BigInteger</a>. Internally it's an array of ints. </p></div>
            <details class="comment "
         id="comment-voat_449884"
         data-depth="1"
         data-id="voat_449884"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/rdnetto/">u/rdnetto</a>

            </span>
            
            
            
            <span title="Posted: 2015-06-24 16:27:28 UTC">24 Jun 2015 16:27</span>
        </span>
    </summary>
    <div class="md"><p>Pretty much this. There are a bunch of encodings that are <em>theoretically possible</em>, but in practice you can't beat an array of ints for performance on a COTS CPU. (Involve GPUs or FPGAs and it's a completely different story.)</p></div>
</details>

</details>

        <details class="comment "
         id="comment-voat_460763"
         data-depth="0"
         data-id="voat_460763"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/isosum/">u/isosum</a>

            </span>
            
            
            
            <span title="Posted: 2015-06-25 04:44:11 UTC">25 Jun 2015 04:44</span>
        </span>
    </summary>
    <div class="md"><p>One format I've seen in several places (the MIDI file format, for example) is base-128 with the high bit set on all bytes except the last, i.e. (in hex):</p>
<pre><code>0 = 00
1 = 01
...
127 = 7F
128 = 81 00
129 = 81 01
...
255 = 81 7F
256 = 82 00
...
16383 = FF 7F
16384 = 81 80 00
...
</code></pre>
<p>The nice thing about this is a number always encodes to a multiple of 8 bits - reading and writing data tends to be much easier when everything is byte-aligned.</p></div>
</details>

</div>
    </main>

<footer class="container-fluid">
  <a class="to-top mt-1 mb-1 btn btn-lg btn-primary" href="#top">top of page</a>
  <p class="small mb-0">
    last archived 28 Apr 2020
    <a href="https://github.com/19-84/redd-archiver">source code</a>
  </p>
</footer>
    </div>

  </body>
</html>