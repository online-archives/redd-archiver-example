<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Alright so I take back all the nice things I said about wxWidgets. I&#39;m using wxSocketClient to connect to a server and do some stuff. I... - v/programming">
<meta name="keywords" content="programming, dialog, events, modal, alright, wxwidgets, wxsocket, bug, pretty, wxsocketevent">
<meta name="author" content="Redd Archive Demo">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1369864.html">

<!-- Open Graph Tags -->
<meta property="og:title" content="v/programming: wxSocketEvent not being sent while modal dialog is open">
<meta property="og:description" content="Alright so I take back all the nice things I said about wxWidgets. I&#39;m using wxSocketClient to connect to a server and do some stuff. I... - v/programming">
<meta property="og:type" content="article">
<meta property="og:url" content="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1369864.html">
<meta property="og:site_name" content="Redd Archive Demo">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="v/programming: wxSocketEvent not being sent while modal dialog is open">
<meta name="twitter:description" content="Alright so I take back all the nice things I said about wxWidgets. I&#39;m using wxSocketClient to connect to a server and do some stuff. I... - v/programming">

    <!-- Favicon -->
<link rel="icon" href="../../../../static/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../../../../static/apple-touch-icon.png">
    <link rel="manifest" href="../../../../static/site.webmanifest">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "DiscussionForumPosting",
  "headline": "wxSocketEvent not being sent while modal dialog is open",
  "author": {
    "@type": "Person",
    "name": "tame"
  },
  "datePublished": "2016-10-26T07:50:50Z",
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/CommentAction",
    "userInteractionCount": 1
  },
  "isPartOf": {
    "@type": "WebSite",
    "name": "v/programming Archive",
    "url": "https://online-archives.github.io/redd-archiver-example"
  },
  "text": "Alright so I take back all the nice things I said about wxWidgets. I'm using wxSocketClient to connect to a server and do some stuff. I call wxSocket::SetEventHandler() to register for events, and (after finding this bug report and making the change suggested there... pretty sad that such an easily reproducible bug has been so well documented for nearly two years and it's still marked as 'new') it's been working alright... except if I pop up a modal dialog box, at which point I stop getting..."
}
</script>
    <!-- Font preload removed - using system fonts for instant rendering -->

    <!-- Theme Toggle -->
    <input type="checkbox" id="dark-theme-toggle">

    <!-- Universal CSS Build -->
    <link rel="stylesheet" href="../../../../static/css/redd-archiver-universal.css">


    <title>v/programming: wxSocketEvent not being sent while modal dialog is open</title>
  </head>
  <body>
    <div class="site-content">
<header>
  <nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" href="../../../../v/programming/index.html">v/programming</a>
    <input type="checkbox" id="navbar-toggle" class="navbar-toggle">
    <label for="navbar-toggle" class="navbar-toggler" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </label>
    <div class="navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index.html">score</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-comments/index.html">comments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-date/index.html">date</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../search">search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../index.html">home</a>
        </li>
        <li class="nav-item">
          <label for="dark-theme-toggle" class="nav-link theme-toggle" title="Toggle dark theme"></label>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <main role="main" class="container-fluid">
<div class="submission pt-3" data-id="voat_1369864">
  <h3 class="title">
      wxSocketEvent not being sent while modal dialog is open
    
    
    
    
    
    
  </h3>
  <p>
    <span class="badge badge-primary" title="Score: 1">1</span>
    &nbsp;&nbsp;
    <span title="Posted: 2016-10-26 07:50:50 UTC">26 Oct 2016 07:50</span>
    by <span ><a class="user-link" href="../../../../user/tame/">u/tame</a>
</span>
    
    
    <span title=""></span>
  </p>
  <div class="card mt-3 mb-3">
    <div class="card-body">
      <div class="md"><p>Alright so I take back all the nice things I said about wxWidgets. I'm using wxSocketClient to connect to a server and do some stuff. I call wxSocket::SetEventHandler() to register for events, and (after finding <a href="http://trac.wxwidgets.org/ticket/16818">this bug report</a> and making the change suggested there... pretty sad that such an easily reproducible bug has been so well documented for nearly two years and it's still marked as 'new') it's been working alright... <em>except</em> if I pop up a modal dialog box, at which point I stop getting input events when data's received. If I close the dialog quickly before the connection times out, the events do get delivered.</p>
<p>Anyone have any idea what's going on, before I throw wxSocket in the bin and just do it myself using winsock?</p>
<p>Edit for more details:
Platform is Windows 8.1 using TDM-GCC, the whole application is single threaded and pretty simple. 
Tried clearing wxWS_EX_BLOCK_EVENTS from the dialog's window style, no dice.</p></div>
    </div>
  </div>
</div>

<div class="comments">
  <h4>4 comments</h4>
        <details class="comment "
         id="comment-voat_6657658"
         data-depth="0"
         data-id="voat_6657658"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/lemon11/">u/lemon11</a>

            </span>
            
            
            
            <span title="Posted: 2016-10-26 08:08:54 UTC">26 Oct 2016 08:08</span>
        </span>
    </summary>
    <div class="md"><p>Modal dialogs choke off the main event loop. The interface should be in its own process or thread, away from networking, ideally. Fork off for the socket or simply avoid anything like modal dialogs that pause the loop.</p></div>
            <details class="comment "
         id="comment-voat_6657684"
         data-depth="1"
         data-id="voat_6657684"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/tame/">u/tame</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-10-26 08:20:29 UTC">26 Oct 2016 08:20</span>
        </span>
    </summary>
    <div class="md"><p>Yeah, they do their own little event loop inside ShowModal() but that should still pump the main event queue, right? My main window still gets other messages (timer ticks, etc.) Or does wxTimer not use the same event queue?</p></div>
            <details class="comment "
         id="comment-voat_6658138"
         data-depth="2"
         data-id="voat_6658138"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/lemon11/">u/lemon11</a>

            </span>
            
            
            
            <span title="Posted: 2016-10-26 11:09:06 UTC">26 Oct 2016 11:09</span>
        </span>
    </summary>
    <div class="md"><p>Strange. It's possible timers work on signals or something, yes. But I don't know Wx deeply enough, sorry.</p></div>
            <details class="comment "
         id="comment-voat_6658179"
         data-depth="3"
         data-id="voat_6658179"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/tame/">u/tame</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-10-26 11:20:33 UTC">26 Oct 2016 11:20</span>
        </span>
    </summary>
    <div class="md"><p>Thanks for having a crack at it, at least! :)</p>
<p>I think I'm on the right track now. It turns out that WSAAsyncSelect() (which wxSocket uses internally to get callbacks) will only send one message after each call to recv(), but sometimes this message will be sent while the data is still being recieved, before select() / recv() can see it. So if you only ever call recv() from the event handler, AND it's guarded by a call to select() to see if there's any data waiting, then you can get very rare situation where a message is generated, select() says there's no data waiting, and so recv() is never called, which means no new events are generated. This seems to be what's going on inside wxMSW.</p>
<p>What this has to do with modal dialogs, I have NFI, except I guess they introduce some time lag that uncovered a race condition or something.</p>
<p>Edit: Nope, while I still think that's <em>one</em> problem, it looks like you were right about the message loop. Windows events still get handled but wxWidgets' internal events don't seem to get pumped while the dialog's message loop is running. Blah.</p></div>
</details>

</details>

</details>

</details>

</div>
    </main>

<footer class="container-fluid">
  <a class="to-top mt-1 mb-1 btn btn-lg btn-primary" href="#top">top of page</a>
  <p class="small mb-0">
    last archived 28 Apr 2020
    <a href="https://github.com/19-84/redd-archiver">source code</a>
  </p>
</footer>
    </div>

  </body>
</html>