<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is. - Discussion in v/programming with 16 comments">
<meta name="keywords" content="programming, bored, text, based, rpg, tell, exactly, awful, coding">
<meta name="author" content="Redd Archive Demo">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1003519.html">

<!-- Open Graph Tags -->
<meta property="og:title" content="v/programming: Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is.">
<meta property="og:description" content="Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is. - Discussion in v/programming with 16 comments">
<meta property="og:type" content="article">
<meta property="og:url" content="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1003519.html">
<meta property="og:site_name" content="Redd Archive Demo">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="v/programming: Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is.">
<meta name="twitter:description" content="Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is. - Discussion in v/programming with 16 comments">

    <!-- Favicon -->
<link rel="icon" href="../../../../static/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../../../../static/apple-touch-icon.png">
    <link rel="manifest" href="../../../../static/site.webmanifest">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "DiscussionForumPosting",
  "headline": "Bored? Go over this text-based RPG I'm making. Tell me exactly how awful my coding is.",
  "author": {
    "@type": "Person",
    "name": "draco_nite"
  },
  "datePublished": "2016-04-25T06:31:18Z",
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/CommentAction",
    "userInteractionCount": 9
  },
  "isPartOf": {
    "@type": "WebSite",
    "name": "v/programming Archive",
    "url": "https://online-archives.github.io/redd-archiver-example"
  },
  "url": "https://bitbucket.org/weanoob/whorehouse",
  "mentions": {
    "@type": "WebPage",
    "url": "https://bitbucket.org/weanoob/whorehouse"
  }
}
</script>
    <!-- Font preload removed - using system fonts for instant rendering -->

    <!-- Theme Toggle -->
    <input type="checkbox" id="dark-theme-toggle">

    <!-- Universal CSS Build -->
    <link rel="stylesheet" href="../../../../static/css/redd-archiver-universal.css">


    <title>v/programming: Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is.</title>
  </head>
  <body>
    <div class="site-content">
<header>
  <nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" href="../../../../v/programming/index.html">v/programming</a>
    <input type="checkbox" id="navbar-toggle" class="navbar-toggle">
    <label for="navbar-toggle" class="navbar-toggler" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </label>
    <div class="navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index.html">score</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-comments/index.html">comments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-date/index.html">date</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../search">search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../index.html">home</a>
        </li>
        <li class="nav-item">
          <label for="dark-theme-toggle" class="nav-link theme-toggle" title="Toggle dark theme"></label>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <main role="main" class="container-fluid">
<div class="submission pt-3" data-id="voat_1003519">
  <h3 class="title">
      <a href="https://bitbucket.org/weanoob/whorehouse" title="https://bitbucket.org/weanoob/whorehouse">Bored? Go over this text-based RPG I&#39;m making. Tell me exactly how awful my coding is.</a>
    
    
    
    
    
    
  </h3>
  <p>
    <span class="badge badge-primary" title="Score: 12">12</span>
    &nbsp;&nbsp;
    <span title="Posted: 2016-04-25 06:31:18 UTC">25 Apr 2016 06:31</span>
    by <span ><a class="user-link" href="../../../../user/draco_nite/">u/draco_nite</a>
</span>
    
    
    <span title="https://bitbucket.org/weanoob/whorehouse"></span>
  </p>
</div>

<div class="comments">
  <h4>16 comments</h4>
        <details class="comment "
         id="comment-voat_5026608"
         data-depth="0"
         data-id="voat_5026608"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 2">
            2
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/RevanProdigalKnight/">u/RevanProdigalKnight</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 13:51:34 UTC">25 Apr 2016 13:51</span>
        </span>
    </summary>
    <div class="md"><p>For a start, I would recommend swapping out any <code>if/elif/else</code> block with more than 3 clauses to a <code>switch</code> block, but that's more of a personal preference thing than an actual necessity. I find that maintaining large <code>switch</code> blocks tends to create fewer errors than maintaining a huge <code>if/elif/else</code> block.  Ideally, if you're comfortable with it, I would recommend a more functionally oriented solution by creating a <code>dict</code> of <code>lambda</code> expressions to navigate, and reduce your giant <code>if/elif/else</code> blocks to something like this (example taken from <code>attributes.py</code>, <code>Stats.mod_stat</code> [line 25]):</p>
<pre><code>def mod_stat(self, stat, value, mode):
  stats = {
    'max_hp': lambda value: self.max_hp += value,
    'hp': lambda value: self.hp += value,
    'atk': lambda value: self.atk += value,
    'acc': lambda value: self.acc += value,
    'arm': lambda value: self.arm += value
  }
  if mode == 0:
    value = -value
  if stat in stats:
    stats[stat](value)
  else:
    print(stat, &quot;is not a stat&quot;)
</code></pre>
<p>Forgive me if my python syntax is a bit off, it's been a while since I was last able to use it</p>
<p>EDIT: Gaaah, I accidentally typed <code>stat[stats]</code> and didn't notice it. That most definitely would not work.</p>
<p>EDIT2: While typing up my reply to this, I noticed that I missed an if statement in this function</p></div>
            <details class="comment "
         id="comment-voat_5026961"
         data-depth="1"
         data-id="voat_5026961"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/RevanProdigalKnight/">u/RevanProdigalKnight</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 14:46:43 UTC">25 Apr 2016 14:46</span>
        </span>
    </summary>
    <div class="md"><p>Just thought of this - If you don't mind a more serious refactoring towards a more object-oriented solution, here's an example of how I would rewrite <code>attributes.py</code> (you are free to either follow this example or ignore it as you wish):</p>
<pre><code>class Stat:
  def __init__(self, initValue=0, increaseAmount=0, statName=&quot;&quot;, max=initValue, min=0): # Yay default values
    self.value = initValue
    self.maxValue = max
    self.minValue = min
    self.increaseAmount = increaseAmount
    self.statName = statName
  def increase(self):
    self.maxValue += self.increaseAmount
    self.value += self.increaseAmount # Not sure if this should increase with the max or not, I'm not the one writing the game
    print(&quot;Your &quot; + self.statName + &quot; is now&quot;, self.value
  def mod(self,value=0):
    self.value += value
    if self.value &gt; self.maxValue:
      self.value = self.maxValue
    elif self.value &lt; self.minValue:
      self.value = self.minValue
class Stats:
  def __init__(self, max_hp, atk, acc, arm, moveset):
    self.stats = {
      'hp': new Stat(max_hp),
      'atk': new Stat(atk),
      'acc': new Stat(acc),
      'arm': new Stat(arm)
    }
    self.moveset = moveset
  def mod_stat(self, stat, value, mode):
    if mode == 0:
      value = -value
    if stat in self.stats:
      self.stats[stat].mod(value)
    else:
      print(stat, &quot;is not a stat&quot;)
class PlayerStats(Stats): # mod_stat inherited from Stats, so we don't need to define it here
  def __init__(self):
    self.stats = {
      'hp': new Stat(100, 10, &quot;HP&quot;),
      'atk': new Stat(10, 3, &quot;attack&quot;),
      'acc': new Stat(85, 5, &quot;accuracy&quot;),
      'arm': new Stat(0, 5, &quot;armor&quot;),
      'mp': new Stat(100, 10, &quot;mp&quot;),
      'nut': new Stat(3, 0, &quot;nut&quot;)
    }
    self.moveset = None
  def increase(self, stat):
    if stat in self.stats:
      self.stats[stat].increase()
    else:
      print(&quot;WHAT ARE YOU DOING&quot;)
</code></pre></div>
            <details class="comment "
         id="comment-voat_5033739"
         data-depth="2"
         data-id="voat_5033739"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/draco_nite/">u/draco_nite</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-04-26 05:26:26 UTC">26 Apr 2016 05:26</span>
        </span>
    </summary>
    <div class="md"><p>Just a small nitpick: <code>new</code> doesn't work in Python 3.</p></div>
</details>

</details>

            <details class="comment "
         id="comment-voat_5030407"
         data-depth="1"
         data-id="voat_5030407"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/draco_nite/">u/draco_nite</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-04-25 21:16:47 UTC">25 Apr 2016 21:16</span>
        </span>
    </summary>
    <div class="md"><p>I'm guessing the lambdas somehow make it so I'm not just increasing the value in the dict? I tried it with a dict first, it only increased the dict value.</p></div>
            <details class="comment "
         id="comment-voat_5031090"
         data-depth="2"
         data-id="voat_5031090"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/RevanProdigalKnight/">u/RevanProdigalKnight</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 22:36:21 UTC">25 Apr 2016 22:36</span>
        </span>
    </summary>
    <div class="md"><p>Yeah, the lambda makes the entry a function that you can invoke at any time. Sorry, I really should have included a link to <a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk">some documentation</a> in my original comment.</p>
<p>In short, lambdas are functions that are bound to variables, and can be called anywhere within the function that they're defined in, or they can be a return value from a function.</p></div>
</details>

</details>

</details>

        <details class="comment "
         id="comment-voat_5030011"
         data-depth="0"
         data-id="voat_5030011"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/svipbo/">u/svipbo</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 20:33:03 UTC">25 Apr 2016 20:33</span>
        </span>
    </summary>
    <div class="md"><p>Here's one thing:</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-123">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-123</a></p>
<p>Self-explanatory, really. In other words, it would be easier to understand if you stored this logic in a data structure instead of using &quot;print&quot; statements. But's that's really a very minor point: it's easy to understand as it is.</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-39">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-39</a></p>
<p>A bit confusing here. You use a global variable to store a list of the scenes, but then you also have a parameter to say which list to use:</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-205">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/scenes.py?at=master#scenes.py-205</a></p>
<p>If you can't create a scene that isn't in the global list, then one wonders what the point of the parameter is.</p>
<p>Generally I don't see global variables as that bad. You'll know that they are bad when you start to get confused by the code.</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-13">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-13</a></p>
<p>With global variables like these, one thing you can do to make the code easier to understand is to comment extensively about (a) where the variable is set, and (b) where the variable is read. This way, when you see a function accessing it, you will have a better idea what code set the value of the variable.</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-73">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-73</a></p>
<p>Seems a bit strange to use exception handling to know whether the command is recognized or not.</p>
<p>One question is how to read the code. So I see there is an exception here called <code>KeyError</code>. What throws this exception? Is it caught elsewhere? I thought I could look through this file for this <code>KeyError</code> but it only appears twice in the file and neither place gives me a clue. This shows a basic principle of what makes code easy to understand: put stuff near each other in the source code so you don't have to look across many locations in the source code to understand the logic, and when this isn't the case, comments help.</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-70">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-70</a></p>
<p><code>stuff</code> and <code>stuff_split</code> are bad variable names. Maybe <code>input_line</code> and <code>input_arguments</code> or something?</p>
<p><a href="https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-8">https://bitbucket.org/weanoob/whorehouse/src/8a9fba4083af2e1397563db509cd7077889b6902/combat.py?at=master#combat.py-8</a></p>
<p>So you have the <code>all_spells</code> variable which you access in a few places in this file. I looked at the <code>spells.py</code> file where the <code>all_spells</code> variable is initialized. But I wasn't sure if spells were added elsewhere as well. I think it would be hard to tell without looking through the rest of the source code.</p></div>
            <details class="comment "
         id="comment-voat_5033867"
         data-depth="1"
         data-id="voat_5033867"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/draco_nite/">u/draco_nite</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-04-26 05:54:24 UTC">26 Apr 2016 05:54</span>
        </span>
    </summary>
    <div class="md"><blockquote>
<p>If you can't create a scene that isn't in the global list, then one wonders what the point of the parameter is.</p>
</blockquote>
<p>The point of the parameter is that pretty much everyone has told me &quot;global vars are bad, mmkay?&quot;</p>
<blockquote>
<p>Seems a bit strange to use exception handling to know whether the command is recognized or not.</p>
</blockquote>
<p>Thanks for finding that, I've been trying to get rid of them, I was mostly using them when I didn't really know any other way to fix the problem I was having at the time.</p>
<blockquote>
<p>But I wasn't sure if spells were added elsewhere as well.</p>
</blockquote>
<p>Unless I've misunderstood you, every single spell in the game (currently one) should be in spells.py</p></div>
</details>

</details>

        <details class="comment "
         id="comment-voat_5033523"
         data-depth="0"
         data-id="voat_5033523"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/Tommstein/">u/Tommstein</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-26 04:33:41 UTC">26 Apr 2016 04:33</span>
        </span>
    </summary>
    <div class="md"><p>I like the theme of this game.</p></div>
</details>

        <details class="comment "
         id="comment-voat_5026425"
         data-depth="0"
         data-id="voat_5026425"
open>
    <summary class="comment-header">
        <span class="badge badge-danger"
              title="Comment score: -1">
            -1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/SketchyFishSandwich/">u/SketchyFishSandwich</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 13:22:37 UTC">25 Apr 2016 13:22</span>
        </span>
    </summary>
    <div class="md"><p>Will there be a console port?</p></div>
            <details class="comment "
         id="comment-voat_5030399"
         data-depth="1"
         data-id="voat_5030399"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/draco_nite/">u/draco_nite</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-04-25 21:15:13 UTC">25 Apr 2016 21:15</span>
        </span>
    </summary>
    <div class="md"><p>If someone buys me a devkit after I finish this, sure.</p></div>
</details>

</details>

        <details class="comment "
         id="comment-voat_5029789"
         data-depth="0"
         data-id="voat_5029789"
open>
    <summary class="comment-header">
        <span class="badge badge-danger"
              title="Comment score: -2">
            -2
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/J_Darnley/">u/J_Darnley</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-25 20:04:00 UTC">25 Apr 2016 20:04</span>
        </span>
    </summary>
    <div class="md"><p>It's python; need I say more?</p>
<p>/me runs</p></div>
            <details class="comment "
         id="comment-voat_5033542"
         data-depth="1"
         data-id="voat_5033542"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/Tommstein/">u/Tommstein</a>

            </span>
            
            
            
            <span title="Posted: 2016-04-26 04:39:48 UTC">26 Apr 2016 04:39</span>
        </span>
    </summary>
    <div class="md"><p>lolwut</p></div>
</details>

</details>

</div>
    </main>

<footer class="container-fluid">
  <a class="to-top mt-1 mb-1 btn btn-lg btn-primary" href="#top">top of page</a>
  <p class="small mb-0">
    last archived 28 Apr 2020
    <a href="https://github.com/19-84/redd-archiver">source code</a>
  </p>
</footer>
    </div>

  </body>
</html>