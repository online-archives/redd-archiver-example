<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="I&#39;m trying to make a web page archiver sort of like wayback machine. My though process so far has been: For the page to look readable i... - v/programming">
<meta name="keywords" content="programming, css, javascript, archive, webpage, properly, trying, web, archiver, like">
<meta name="author" content="Redd Archive Demo">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1426295.html">

<!-- Open Graph Tags -->
<meta property="og:title" content="v/programming: How to archive a webpage properly?">
<meta property="og:description" content="I&#39;m trying to make a web page archiver sort of like wayback machine. My though process so far has been: For the page to look readable i... - v/programming">
<meta property="og:type" content="article">
<meta property="og:url" content="https://online-archives.github.io/redd-archiver-example/v/programming/comments/1426295.html">
<meta property="og:site_name" content="Redd Archive Demo">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="v/programming: How to archive a webpage properly?">
<meta name="twitter:description" content="I&#39;m trying to make a web page archiver sort of like wayback machine. My though process so far has been: For the page to look readable i... - v/programming">

    <!-- Favicon -->
<link rel="icon" href="../../../../static/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../../../../static/apple-touch-icon.png">
    <link rel="manifest" href="../../../../static/site.webmanifest">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "DiscussionForumPosting",
  "headline": "How to archive a webpage properly?",
  "author": {
    "@type": "Person",
    "name": "IdeaGhost"
  },
  "datePublished": "2016-11-22T02:34:41Z",
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/CommentAction",
    "userInteractionCount": 6
  },
  "isPartOf": {
    "@type": "WebSite",
    "name": "v/programming Archive",
    "url": "https://online-archives.github.io/redd-archiver-example"
  },
  "text": "I'm trying to make a web page archiver sort of like wayback machine. My though process so far has been: For the page to look readable i need at least the html and css. So i need to download the html, then lookup for css, then possibly re-write the css references? (ie fix absolute urls to local urls). And that's it? What about javascript, can't it be a security issue , too leave it there ? A \"safer\" alternative to handle javascript would be to remove everything not in a whitelist (ie every tag..."
}
</script>
    <!-- Font preload removed - using system fonts for instant rendering -->

    <!-- Theme Toggle -->
    <input type="checkbox" id="dark-theme-toggle">

    <!-- Universal CSS Build -->
    <link rel="stylesheet" href="../../../../static/css/redd-archiver-universal.css">


    <title>v/programming: How to archive a webpage properly?</title>
  </head>
  <body>
    <div class="site-content">
<header>
  <nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" href="../../../../v/programming/index.html">v/programming</a>
    <input type="checkbox" id="navbar-toggle" class="navbar-toggle">
    <label for="navbar-toggle" class="navbar-toggler" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </label>
    <div class="navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index.html">score</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-comments/index.html">comments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-date/index.html">date</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../search">search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../index.html">home</a>
        </li>
        <li class="nav-item">
          <label for="dark-theme-toggle" class="nav-link theme-toggle" title="Toggle dark theme"></label>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <main role="main" class="container-fluid">
<div class="submission pt-3" data-id="voat_1426295">
  <h3 class="title">
      How to archive a webpage properly?
    
    
    
    
    
    
  </h3>
  <p>
    <span class="badge badge-primary" title="Score: 9">9</span>
    &nbsp;&nbsp;
    <span title="Posted: 2016-11-22 02:34:41 UTC">22 Nov 2016 02:34</span>
    by <span ><a class="user-link" href="../../../../user/IdeaGhost/">u/IdeaGhost</a>
</span>
    
    
    <span title=""></span>
  </p>
  <div class="card mt-3 mb-3">
    <div class="card-body">
      <div class="md"><p>I'm trying to make a web page archiver sort of like wayback machine.</p>
<p>My though process so far has been:</p>
<p>For the page to look readable i need at least the html and css.
So i need to download the html, then lookup for css, then possibly re-write the css references? (ie fix absolute urls to local urls).</p>
<p>And that's it?
What about javascript, can't it be a security issue , too leave it there ?</p>
<p>A "safer" alternative to handle javascript would be to remove everything not in a whitelist (ie every tag and attribute not whitelisted).
Since javascript can be in a lot of places right?
<script> tags, attributes such as onclick...</p>
<p>
I would appreciate some input  thanks.</p></div>
    </div>
  </div>
</div>

<div class="comments">
  <h4>8 comments</h4>
        <details class="comment "
         id="comment-voat_6883383"
         data-depth="0"
         data-id="voat_6883383"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 3">
            3
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/whisky_cat/">u/whisky_cat</a>

            </span>
            
            
            
            <span title="Posted: 2016-11-22 03:16:04 UTC">22 Nov 2016 03:16</span>
        </span>
    </summary>
    <div class="md"><p>I'd suggest looking into <a href="https://scrapy.org/">open source web scrapers</a>. That said archiving the results via a crawler over time, with versioned instances of the site, is going to take significant database and programming strategy.</p>
<p>Javascript execution in the <a href="https://www.html5rocks.com/en/tutorials/speed/script-loading/">DOM is insanely complex</a>. There is no way you can achieve archiving the level and timing of Javascript executed by the site, the site's possible subdomains, the sites possible reference to cookies, localstorage, or indexedDB, or it's cross-domain dependencies. (i.e. you're right, you can't really do JS unless you're a top-tier engineer with a team, or the site is just small business, maybe Wordpress).</p>
<p>I'd try out basic scraping and storing that data in a database, then presenting it, and get a gut check how deep the rabbit hole is.</p></div>
</details>

        <details class="comment "
         id="comment-voat_6883208"
         data-depth="0"
         data-id="voat_6883208"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/scandalous-goat/">u/scandalous-goat</a>

            </span>
            
            
            
            <span title="Posted: 2016-11-22 02:48:32 UTC">22 Nov 2016 02:48</span>
        </span>
    </summary>
    <div class="md"><p>Not just CSS, but every resources linked from the HTML document, which includes images and potentially audio and video, if you want to archive them. </p>
<p>For javascript, it would be very hard to do as the code may use XHR, which you can't remove without breaking the code. AFAIK, most archiving service strip the Javascript.</p>
<p>Something more advanced could load the page in a headless &quot;browser&quot; on the server, let the JS run and then archive the result.</p></div>
            <details class="comment "
         id="comment-voat_6883280"
         data-depth="1"
         data-id="voat_6883280"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/IdeaGhost/">u/IdeaGhost</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2016-11-22 03:00:28 UTC">22 Nov 2016 03:00</span>
        </span>
    </summary>
    <div class="md"><blockquote>
<p>Not just CSS, but every resources linked from the HTML document, which includes images and potentially audio and video, if you want to archive them.</p>
</blockquote>
<p>Yeah i forgot, i also have to edit the CSS to change the image urls for example right?</p>
<blockquote>
<p>AFAIK, most archiving service strip the Javascript.
that is what i was going for, sounds like the easiest way, The issue i identified is that i probably have to do this in a whitelist fashion, since javascript can hide in a lot of places ( or it it just a few?)</p>
</blockquote></div>
            <details class="comment "
         id="comment-voat_6883348"
         data-depth="2"
         data-id="voat_6883348"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/scandalous-goat/">u/scandalous-goat</a>

            </span>
            
            
            
            <span title="Posted: 2016-11-22 03:11:36 UTC">22 Nov 2016 03:11</span>
        </span>
    </summary>
    <div class="md"><p>Yes, rewrite the CSS as it can link to images and fonts.</p>
<p>For the JS, it can hide in a few places. Read about cross-site scripting to learn more about the issue.</p></div>
</details>

</details>

</details>

        <details class="comment "
         id="comment-voat_6896750"
         data-depth="0"
         data-id="voat_6896750"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/z7server/">u/z7server</a>

            </span>
            
            
            
            <span title="Posted: 2016-11-23 13:31:45 UTC">23 Nov 2016 13:31</span>
        </span>
    </summary>
    <div class="md"><p>Removing Javascript isn't the best solution, most of sites without javascript are unreadable.</p></div>
</details>

        <details class="comment "
         id="comment-voat_6981949"
         data-depth="0"
         data-id="voat_6981949"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/cyberpunk/">u/cyberpunk</a>

            </span>
            
            
            
            <span title="Posted: 2016-11-29 10:10:05 UTC">29 Nov 2016 10:10</span>
        </span>
    </summary>
    <div class="md"><pre><code>wget -E  -k -p http://example.com
</code></pre></div>
</details>

        <details class="comment "
         id="comment-voat_7309670"
         data-depth="0"
         data-id="voat_7309670"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/Pao_Tzu/">u/Pao_Tzu</a>

            </span>
            
            
            
            <span title="Posted: 2016-12-20 21:02:06 UTC">20 Dec 2016 21:02</span>
        </span>
    </summary>
    <div class="md"><p>The Archive Team has a full page on that subject: <a href="http://www.archiveteam.org/index.php?title=Wget">http://www.archiveteam.org/index.php?title=Wget</a></p></div>
</details>

</div>
    </main>

<footer class="container-fluid">
  <a class="to-top mt-1 mb-1 btn btn-lg btn-primary" href="#top">top of page</a>
  <p class="small mb-0">
    last archived 28 Apr 2020
    <a href="https://github.com/19-84/redd-archiver">source code</a>
  </p>
</footer>
    </div>

  </body>
</html>