<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Machine Code Instructions - Discussion in v/programming with 8 comments">
<meta name="keywords" content="programming, machine, code">
<meta name="author" content="Redd Archive Demo">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://online-archives.github.io/redd-archiver-example/v/programming/comments/395613.html">

<!-- Open Graph Tags -->
<meta property="og:title" content="v/programming: Machine Code Instructions">
<meta property="og:description" content="Machine Code Instructions - Discussion in v/programming with 8 comments">
<meta property="og:type" content="article">
<meta property="og:url" content="https://online-archives.github.io/redd-archiver-example/v/programming/comments/395613.html">
<meta property="og:site_name" content="Redd Archive Demo">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="v/programming: Machine Code Instructions">
<meta name="twitter:description" content="Machine Code Instructions - Discussion in v/programming with 8 comments">

    <!-- Favicon -->
<link rel="icon" href="../../../../static/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../../../../static/apple-touch-icon.png">
    <link rel="manifest" href="../../../../static/site.webmanifest">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "DiscussionForumPosting",
  "headline": "Machine Code Instructions",
  "author": {
    "@type": "Person",
    "name": "roznak"
  },
  "datePublished": "2015-08-10T02:54:05Z",
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/CommentAction",
    "userInteractionCount": 3
  },
  "isPartOf": {
    "@type": "WebSite",
    "name": "v/programming Archive",
    "url": "https://online-archives.github.io/redd-archiver-example"
  },
  "url": "https://www.youtube.com/watch?v=Mv2XQgpbTNE",
  "mentions": {
    "@type": "WebPage",
    "url": "https://www.youtube.com/watch?v=Mv2XQgpbTNE"
  }
}
</script>
    <!-- Font preload removed - using system fonts for instant rendering -->

    <!-- Theme Toggle -->
    <input type="checkbox" id="dark-theme-toggle">

    <!-- Universal CSS Build -->
    <link rel="stylesheet" href="../../../../static/css/redd-archiver-universal.css">


    <title>v/programming: Machine Code Instructions</title>
  </head>
  <body>
    <div class="site-content">
<header>
  <nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" href="../../../../v/programming/index.html">v/programming</a>
    <input type="checkbox" id="navbar-toggle" class="navbar-toggle">
    <label for="navbar-toggle" class="navbar-toggler" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </label>
    <div class="navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index.html">score</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-comments/index.html">comments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../v/programming/index-date/index.html">date</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../search">search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../../../../index.html">home</a>
        </li>
        <li class="nav-item">
          <label for="dark-theme-toggle" class="nav-link theme-toggle" title="Toggle dark theme"></label>
        </li>
      </ul>
    </div>
  </nav>
</header>

    <main role="main" class="container-fluid">
<div class="submission pt-3" data-id="voat_395613">
  <h3 class="title">
      <a href="https://www.youtube.com/watch?v=Mv2XQgpbTNE" title="https://www.youtube.com/watch?v=Mv2XQgpbTNE">Machine Code Instructions</a>
    
    
    
    
    
    
  </h3>
  <p>
    <span class="badge badge-primary" title="Score: 27">27</span>
    &nbsp;&nbsp;
    <span title="Posted: 2015-08-10 02:54:05 UTC">10 Aug 2015 02:54</span>
    by <span ><a class="user-link" href="../../../../user/roznak/">u/roznak</a>
</span>
    
    
    <span title="https://www.youtube.com/watch?v=Mv2XQgpbTNE"></span>
  </p>
</div>

<div class="comments">
  <h4>8 comments</h4>
        <details class="comment "
         id="comment-voat_1689984"
         data-depth="0"
         data-id="voat_1689984"
open>
    <summary class="comment-header">
        <span class="badge badge-success-bright"
              title="Comment score: 3">
            3
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/Pawn/">u/Pawn</a>

            </span>
            
            
            
            <span title="Posted: 2015-08-10 03:25:20 UTC">10 Aug 2015 03:25</span>
        </span>
    </summary>
    <div class="md"><p>so sloowwwwwww</p></div>
</details>

        <details class="comment "
         id="comment-voat_1708327"
         data-depth="0"
         data-id="voat_1708327"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 2">
            2
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/roznak/">u/roznak</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2015-08-10 22:17:43 UTC">10 Aug 2015 22:17</span>
        </span>
    </summary>
    <div class="md"><p>I hope that I somehow make people curious and don't get scared of the assembler language. It is not that complicated and scarey at all. It is C that makes it appear more complicated and scarey. </p>
<p>Understand how the assembler is created by your C function or even C# function an you will create faster and more optimal code.</p></div>
            <details class="comment "
         id="comment-voat_1729100"
         data-depth="1"
         data-id="voat_1729100"
open>
    <summary class="comment-header">
        <span class="badge badge-light"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/pminten/">u/pminten</a>

            </span>
            
            
            
            <span title="Posted: 2015-08-11 17:59:37 UTC">11 Aug 2015 17:59</span>
        </span>
    </summary>
    <div class="md"><p>Well that and to actually use assembly you kinda have to know a bunch of things that C automagically does right. In particular (on unixy systems) you have to understand some stuff about how ELF works, calling conventions, system call conventions, etc.</p>
<p>I'd warn against thinking you can create more efficient assembly than a compiler though. Compilers at -O3 tend to produce very very efficient code as they're not bound by the limits of human sanity.</p>
<p>Also, for the people reading this who don't have as much experience, note that C# compiles to a bytecode (Common Intermediate Language), not to machine code. CIL, while looking assemblyish is actually quite a bit higher level since it has for example a built-in notion of objects. On the plus side CIL does have plenty of good documentation and is relatively readable so it's definitely a good place to start. For a (somewhat) similar assembly-like language closer &quot;to the metal&quot; I'd recommend <a href="http://llvm.org/docs/LangRef.html">LLVM IR</a>.</p></div>
            <details class="comment "
         id="comment-voat_1731141"
         data-depth="2"
         data-id="voat_1731141"
open>
    <summary class="comment-header">
        <span class="badge badge-success"
              title="Comment score: 2">
            2
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/roznak/">u/roznak</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2015-08-11 19:17:46 UTC">11 Aug 2015 19:17</span>
        </span>
    </summary>
    <div class="md"><blockquote>
<p>Compilers at -O3 tend to produce very very efficient code as they're not bound by the limits of human sanity.</p>
</blockquote>
<p>But only when it can. Do not blindly trust the -O3 generated assembler, you really must test it.</p>
<p>Sometimes reordering your function and variables can speed things up. E.g. something I have learned is that your function must be written in such a way that the code that is used most of the time is in front of the code that will rarely be called. You help the C compiler to avoid to have a jump in the code that should run most of the time. A jump in the assembler code stalls the execution because it has to reload a new cache. The optimizer can optimize the code that was written but not optimize for what is intended to do. </p>
<p><em>if x then A() else B()</em> could be slower than  <em>if (not x) then B() else A();</em></p>
<p>Sometimes to gain speed you could have the 2 versions, one optimized for A() and one optimized for B().</p>
<blockquote>
<p>note that C# compiles to a bytecode (Common Intermediate Language), not to machine code. CIL,</p>
</blockquote>
<p>Don't let the IL code fool you, when you look how the IL code gets translated into real machine code (assembler) then it is very close.</p>
<p>Voat is not very friendly to write code examples, and I do not have lots of time to write code samples. I just hope that it triggers the love for assembly back and that people dare to look under the hood of what the C compiler creates. </p></div>
            <details class="comment "
         id="comment-voat_1731607"
         data-depth="3"
         data-id="voat_1731607"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/pminten/">u/pminten</a>

            </span>
            
            
            
            <span title="Posted: 2015-08-11 19:36:40 UTC">11 Aug 2015 19:36</span>
        </span>
    </summary>
    <div class="md"><blockquote>
<p>But only when it can. Do not blindly trust the -O3 generated assembler, you really must test it.</p>
</blockquote>
<p>I agree, optimization can make code less efficient in odd cases. When improving performance one should always measure, measure and measure.</p>
<blockquote>
<p>E.g. something I have learned is that your function must be written in such a way that the code that is used most of the time is in front of the code that will rarely be called.</p>
</blockquote>
<p>What you describe sounds like the effects of branch misprediction and can be mitigated both by the compiler and the processor. I know that LLVM could move always executed code to the front of the function, or at least it has all the information needed to know if it's safe to do so. Modern processors try to do branch prediction where they optimistically work on instructions of the branch they think code will take. If somehow that process gets messed up you indeed lose performance.</p>
<blockquote>
<p>Don't let the IL code fool you, when you look how the IL code gets translated into real machine code (assembler) then it is very close.</p>
</blockquote>
<p>Yeah, I would expect that. The main difference (aside from the whole OO support) seems to be that processors have a few registers which are super fast to access for intermediate results while CIL uses a stack for that.</p>
<p>Come to think of it, there's another reason why writing assembly is sometimes useful. New processors sometimes have special instructions for very specific tasks and to use those it can be unavoidable to write assembly yourself (or use the assembly someone else has written). For example code that does a lot of matrix calculations can benefit from the use of SSE but I don't believe compilers often take advantage of that.</p></div>
            <details class="comment "
         id="comment-voat_1733895"
         data-depth="4"
         data-id="voat_1733895"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/roznak/">u/roznak</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2015-08-11 21:06:42 UTC">11 Aug 2015 21:06</span>
        </span>
    </summary>
    <div class="md"><p>MMX, SSE and SSE2 was never used when I was developing in C++ back then. Pre VS2005!!! </p>
<p>When I started with C# I barely went back to C++. </p></div>
</details>

</details>

</details>

</details>

</details>

        <details class="comment "
         id="comment-voat_1708189"
         data-depth="0"
         data-id="voat_1708189"
open>
    <summary class="comment-header">
        <span class="badge badge-light"
              title="Comment score: 1">
            1
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/theoldguy/">u/theoldguy</a>

            </span>
            
            
            
            <span title="Posted: 2015-08-10 22:12:51 UTC">10 Aug 2015 22:12</span>
        </span>
    </summary>
    <div class="md"><p>I'd like to add that the bits in the operand can often be considered as bitfields for which broad range of instructions to use.  <br />
For instance, it could easily be that all the &quot;load accumulator&quot; instructions must have the 6th bit set and 7th bit clear, with the remainder of the bits specifying whether it's a memory operand, another register or an immediate.</p></div>
            <details class="comment "
         id="comment-voat_1708250"
         data-depth="1"
         data-id="voat_1708250"
open>
    <summary class="comment-header">
        <span class="badge badge-warning-orange"
              title="Comment score: 0">
            0
        </span>
        <span class="byline text-muted">
            <span >
                <a class="user-link" href="../../../../user/roznak/">u/roznak</a>

            </span>
                <span class="op-badge" title="Original Poster">[OP]</span>
            
            
            
            <span title="Posted: 2015-08-10 22:15:01 UTC">10 Aug 2015 22:15</span>
        </span>
    </summary>
    <div class="md"><p>I see an expert here. :-)</p></div>
</details>

</details>

</div>
    </main>

<footer class="container-fluid">
  <a class="to-top mt-1 mb-1 btn btn-lg btn-primary" href="#top">top of page</a>
  <p class="small mb-0">
    last archived 28 Apr 2020
    <a href="https://github.com/19-84/redd-archiver">source code</a>
  </p>
</footer>
    </div>

  </body>
</html>